import os as os
import numpy as np
import pandas as pd
import random
import shutil 
from shutil import copyfile
import glob
import operator
from pathlib import Path
from convertFilesNamesToSha256 import *

def removeFiles(folder):
    for the_file in os.listdir(folder):
        file_path = os.path.join(folder, the_file)
        try:
            if os.path.isfile(file_path):
                os.unlink(file_path)
        except Exception as e:
            print(e)

def cleanTempFolders(tempDirectory):
    print("Cleaning temp folders...")
    # Remove files from temp folders
    if os.listdir(tempDirectory) != []:
        print("Removing files: ",tempDirectory)
        removeFiles(tempDirectory+"Asm/")
        removeFiles(tempDirectory+"Hex/")
        removeFiles(tempDirectory+"FilesWithoutPeHeader/")
    print("Done!")

def cleanOutputFolders(outputDirectory):
    print("Cleaning output folders...")
    # Remove files from output folders
    if os.listdir(outputDirectory) != []:
        print("Removing files: ",outputDirectory)
        removeFiles(outputDirectory+"AsmOutput/")
        removeFiles(outputDirectory+"HexOutput/")
        removeFiles(outputDirectory+"PeOutput/")
        removeFiles(outputDirectory+"ExpOutput/")
    print("Done!")

def countFiles(directory):
    x=0
    for files in os.listdir(directory):
        x+=1
    return x

def checkIfFileExists(directory,fileName):
    fullName = Path(directory+fileName)
    if fullName.is_file():
        return 1
    else:
        return 0

def getProcessRunning():
    commandToRun = 'qstat | grep aredondo | wc -l'
    processRunning = os.popen(commandToRun).read()
    return int(processRunning)
