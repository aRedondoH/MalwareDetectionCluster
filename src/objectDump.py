import os as os
import sys

def convertToAsm(virus_dir,output_asm_dir):
    print("Extracting features from ",virus_dir,"...")
    files = [os.path.join(virus_dir,fi) for fi in os.listdir(virus_dir)]
    counterTemp = 0
    for fil in files:
        fileBasename = os.path.basename(fil)
        fileName=virus_dir+fileBasename
        fileNameAsm=output_asm_dir+fileBasename+".asm"
        commandToRun = "objdump -d "+fileName+" > "+fileNameAsm
        os.system(commandToRun)
        counterTemp += 1
        print("File: ",counterTemp, " of:", len(files))
    print ("Done!")
       
virus_dir = sys.argv[1]
output_asm_dir = sys.argv[2]
convertToAsm(virus_dir,output_asm_dir)
